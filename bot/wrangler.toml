name = "astro-bot"
main = "src/index.ts"
compatibility_date = "2025-12-01"
compatibility_flags = ["nodejs_compat"]

# Preserve production secrets/vars on deploy
keep_vars = true

# KV namespace for caching API responses
[[kv_namespaces]]
binding = "CACHE"
id = "e808b21089b14df5b59680c83020500f"

# Cron trigger - runs daily at 2pm UTC (adjust for your timezone)
# See https://developers.cloudflare.com/workers/configuration/cron-triggers/
[triggers]
crons = ["0 14 * * *"]

# Environment variables (set via wrangler secret)
# TELEGRAM_BOT_TOKEN - Bot token from @BotFather
# TELEGRAM_CHAT_ID - Chat ID to send notifications to
# ASTROSPHERIC_API_KEY - Astrospheric Pro API key
# LATITUDE - Observing site latitude
# LONGITUDE - Observing site longitude
# SENTRY_DSN - Sentry DSN for error tracking

# Observability drains to Sentry
[observability.traces]
enabled = true
destinations = ["astro-bot-traces"]

[observability.logs]
enabled = true
destinations = ["astro-bot-logs"]
